# Users
@hostname = http://localhost
@port = 3001
@host = {{hostname}}:{{port}}
@parentPath = api/auth
@userId = 64e10ec5824dba06873f428a
@accessToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGVjZWU0NzUxOTQ2M2RjMDE5ZDg3YTYiLCJlbWFpbCI6InVzZXJAbWFpbC5ydSIsInJvbGUiOiJjdXN0b21lciIsIm5hbWUiOiJib2IiLCJpYXQiOjE2OTMyNTE3MDgsImV4cCI6MTY5MzUxMDkwOH0.ybGgbuuiCWlSeF44SLrm4aNFWLnY-DjTrLqJrMD_92U
@refreshToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiI2NGU3Yzg1OGFkMmUwYjA1ODExY2Q0Y2IiLCJlbWFpbCI6InVzZXJAbWFpbC5ydSIsInJvbGUiOiJjdXN0b21lciIsIm5hbWUiOiJCb2Jpbmluc2tpeSBCb2IiLCJ0b2tlbklkIjoiYTAwMmQyMmYtZTBhMi00NjQ1LThjNzItZDVhY2UzMTczNTJhIiwiaWF0IjoxNjkyOTExNzE2LCJleHAiOjE2OTU1MDM3MTZ9.TNY3Jzm4Js-qdULBaGgmyfr4NGKFtucys7cKEeit0Lw
@contentType = application/json

# Create a new user
POST {{host}}/{{parentPath}}/register HTTP/1.1
Content-Type: {{contentType}}

{
  "name": "bob",
  "email": "user@mail.ru",
  "city": "Москва",
  "password": "qwerty",
  "role": "customer",
  "avatar": "https://images/avatarka.jpeg",
  "dateOfBirth": "1991-01-01"
}

###

# Get user by ID
GET {{host}}/{{parentPath}}/{{userId}} HTTP/1.1
Authorization: Bearer {{accessToken}}

###

# Login user by email and password
POST {{host}}/{{parentPath}}/login HTTP/1.1
Content-Type: {{contentType}}

{
  "email": "user@mail.ru",
  "password": "qwerty"
}

###

# Get new JWT pair
POST {{host}}/{{parentPath}}/refresh HTTP/1.1
Authorization: Bearer {{refreshToken}}

###

# Check user token
POST {{host}}/{{parentPath}}/check HTTP/1.1
Authorization: Bearer {{accessToken}}

###

# Change user password
PATCH {{host}}/{{parentPath}}/changePassword HTTP/1.1
Content-Type: {{contentType}}
Authorization: Bearer {{accessToken}}

{
  "email": "user@mail.ru",
  "currentPassword": "qwerty",
  "newPassword": "123456"
}

###
